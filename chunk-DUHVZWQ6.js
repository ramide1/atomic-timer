import{$ as et,B as U,C as K,D as G,L as J,M as Q,N as X,O as H,T as L,U as k,V as I,W as Y,X as Z,Y as T,Z as j,_ as tt,a as g,b as x,ca as it,d as V,e as $,f as z,g as m,ga as W,h as p,ha as C,i as _,ia as M,j as A,k as f,ka as nt,la as ot,ma as rt,na as st,o as s,oa as at,p as a,q as D,r as q,ra as lt,s as u,t as y,u as c,v,w as F,x as b,y as S,z as w}from"./chunk-UXDGGPRF.js";import"./chunk-OX6TLFWL.js";import"./chunk-EFODRYKE.js";import"./chunk-VPCAUEZH.js";import"./chunk-CW74DJAV.js";import"./chunk-G3CV3VGG.js";import"./chunk-ZSXYZYSQ.js";import"./chunk-5MPL5A3U.js";import"./chunk-NKT2XMZU.js";import"./chunk-4U6PRYVA.js";import"./chunk-34NJY46B.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as O,i as h}from"./chunk-OYAVQN5W.js";var P=(()=>{let n=class n{constructor(e){this.alertController=e}presentAlert(e,i="Alert",t){return h(this,null,function*(){yield(yield this.alertController.create({header:i,subHeader:t,message:e,buttons:["OK"]})).present()})}};n.\u0275fac=function(i){return new(i||n)(x(nt))},n.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var ct=(()=>{let n=class n{constructor(e,i){this.modalCtrl=e,this.alert=i,this.task={name:"",hours:"",minutes:"",seconds:"",image:""}}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return h(this,null,function*(){this.task.name?!this.task.hours&&!this.task.minutes&&!this.task.seconds?this.alert.presentAlert("Duration is required.","Error"):(this.modalCtrl.dismiss(this.task,"confirm"),this.task={name:"",hours:"",minutes:"",seconds:"",image:""}):this.alert.presentAlert("Name is required.","Error")})}onFileChange(e){let i=e.target.files[0];if(i){let t=new FileReader;t.onload=()=>{this.task.image=t.result},t.readAsDataURL(i)}}};n.\u0275fac=function(i){return new(i||n)(p(M),p(P))},n.\u0275cmp=_({type:n,selectors:[["app-add-task-modal"]],decls:17,vars:4,consts:[["slot","start"],[3,"click"],["slot","end"],[1,"ion-padding"],["type","text","placeholder","Task Name","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Hours","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Minutes","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Seconds","ngDefaultControl","",3,"ngModelChange","ngModel"],["type","file","placeholder","Optional Image","ngDefaultControl","",3,"change"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return t.cancel()}),c(4,"Cancel"),a()(),s(5,"ion-buttons",2)(6,"ion-button",1),u("click",function(){return t.confirm()}),c(7,"Confirm"),a()()()(),s(8,"ion-content",3)(9,"ion-item")(10,"ion-input",4),w("ngModelChange",function(r){return S(t.task.name,r)||(t.task.name=r),r}),a()(),s(11,"ion-item")(12,"ion-input",5),w("ngModelChange",function(r){return S(t.task.hours,r)||(t.task.hours=r),r}),a(),s(13,"ion-input",6),w("ngModelChange",function(r){return S(t.task.minutes,r)||(t.task.minutes=r),r}),a(),s(14,"ion-input",7),w("ngModelChange",function(r){return S(t.task.seconds,r)||(t.task.seconds=r),r}),a()(),s(15,"ion-item")(16,"ion-input",8),u("change",function(r){return t.onFileChange(r)}),a()()()),i&2&&(m(10),b("ngModel",t.task.name),m(2),b("ngModel",t.task.hours),m(),b("ngModel",t.task.minutes),m(),b("ngModel",t.task.seconds))},dependencies:[H,J,Q,X,T,C,k,I,L,j,rt],encapsulation:2});let o=n;return o})();var B=(()=>{let n=class n{constructor(){}formatDuration(e,i,t){let l=e!==""?+e:0,r=i!==""?+i:0,R=t!==""?+t:0,ht=l<10?`0${l}`:`${l}`,ft=r<10?`0${r}`:`${r}`,gt=R<10?`0${R}`:`${R}`;return`${ht}:${ft}:${gt}`}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var pt=(()=>{let n=class n{constructor(e,i){this.modalCtrl=e,this.common=i,this.timerHours=0,this.timerMinutes=0,this.timerSeconds=0,this.isTimerRunning=!1,this.timerInterval=null,setTimeout(()=>{this.resetTimer()},200)}close(){return this.modalCtrl.dismiss(null,"cancel")}startStopTimer(){this.isTimerRunning?clearInterval(this.timerInterval):this.timerInterval=setInterval(()=>this.updateTimer(),1e3),this.isTimerRunning=!this.isTimerRunning}updateTimer(){this.timerSeconds>0?this.timerSeconds--:this.timerMinutes>0?(this.timerMinutes--,this.timerSeconds=59):this.timerHours>0?(this.timerHours--,this.timerMinutes=59,this.timerSeconds=59):(clearInterval(this.timerInterval),this.isTimerRunning=!1,this.modalCtrl.dismiss(this.selectedTask,"confirm"))}resetTimer(){this.timerHours=this.selectedTask.hours||0,this.timerMinutes=this.selectedTask.minutes||0,this.timerSeconds=this.selectedTask.seconds||0}};n.\u0275fac=function(i){return new(i||n)(p(M),p(B))},n.\u0275cmp=_({type:n,selectors:[["app-timer-modal"]],inputs:{selectedTask:"selectedTask"},decls:15,vars:4,consts:[["slot","start"],[3,"click"],[1,"ion-padding"],[1,"timer-display"],["expand","full",3,"click"],["expand","full",3,"click","disabled"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return t.close()}),c(4,"Close"),a()(),s(5,"ion-title"),c(6),a()()(),s(7,"ion-content",2)(8,"div",3)(9,"h1"),c(10),a()(),s(11,"ion-button",4),u("click",function(){return t.startStopTimer()}),c(12),a(),s(13,"ion-button",5),u("click",function(){return t.resetTimer()}),c(14," Reset "),a()()),i&2&&(m(6),v(t.selectedTask.name),m(4),v(t.common.formatDuration(t.timerHours,t.timerMinutes,t.timerSeconds)),m(2),F(" ",t.isTimerRunning?"Pause":"Start"," "),m(),f("disabled",!t.isTimerRunning&&t.timerHours===0&&t.timerMinutes===0&&t.timerSeconds===0))},dependencies:[T,C,k,L,W,I],encapsulation:2});let o=n;return o})();var ut=(()=>{let n=class n{constructor(e){this.storage=e,this._storage=null,this.init()}init(){return h(this,null,function*(){let e=yield this.storage.create();this._storage=e})}set(e,i){var t;return(t=this._storage)==null?void 0:t.set(e,i)}get(e){var i;return(i=this._storage)==null?void 0:i.get(e)}remove(e){var i;return(i=this._storage)==null?void 0:i.remove(e)}clear(){var e;return(e=this._storage)==null?void 0:e.clear()}keys(){var e;return(e=this._storage)==null?void 0:e.keys()}length(){var e;return(e=this._storage)==null?void 0:e.length()}getAll(){var i;let e=[];return(i=this._storage)==null||i.forEach((t,l,r)=>{e[t]={value:l,index:r}}),e}};n.\u0275fac=function(i){return new(i||n)(x(lt))},n.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function kt(o,n){o&1&&(s(0,"div",7)(1,"strong",8),c(2,"First add a task"),a()())}function It(o,n){if(o&1&&D(0,"img",12),o&2){let d=y().$implicit;f("src",d.image,z)}}function Tt(o,n){if(o&1){let d=q();s(0,"ion-item",10),u("click",function(){let i=V(d).$implicit,t=y(2);return $(t.openTimerModal(i))}),s(1,"ion-label")(2,"h2"),c(3),a(),s(4,"p"),c(5),a()(),A(6,It,1,1,"img",11),a()}if(o&2){let d=n.$implicit,e=y(2);m(3),v(d.name),m(2),F("Duration: ",e.common.formatDuration(d.hours,d.minutes,d.seconds),""),m(),f("ngIf",d.image)}}function Ct(o,n){if(o&1&&(s(0,"ion-list"),A(1,Tt,7,3,"ion-item",9),a()),o&2){let d=y();m(),f("ngForOf",d.taskList)}}var Nt=(()=>{let n=class n{constructor(e,i,t,l){this.storage=e,this.alert=i,this.modalCtrl=t,this.common=l,this.taskList=[],st({addOutline:at}),this.getTasks()}getTasks(){return h(this,null,function*(){yield this.storage.init(),this.taskList=(yield this.storage.get("tasks"))||[]})}openAddTaskModal(){return h(this,null,function*(){let e=yield this.modalCtrl.create({component:ct});e.present();let{data:i,role:t}=yield e.onWillDismiss();t==="confirm"&&(this.taskList.push(O({},i)),this.storage.set("tasks",this.taskList))})}openTimerModal(e){return h(this,null,function*(){let i=yield this.modalCtrl.create({component:pt,componentProps:{selectedTask:e}});i.present();let{data:t,role:l}=yield i.onWillDismiss();l==="confirm"&&(this.alert.presentAlert("Task "+t.name+" has been completed. Congratulations!!.","Success"),this.taskList=this.taskList.filter(r=>r!==t),this.storage.set("tasks",this.taskList))})}};n.\u0275fac=function(i){return new(i||n)(p(ut),p(P),p(M),p(B))},n.\u0275cmp=_({type:n,selectors:[["app-home"]],decls:12,vars:2,consts:[["slot","start"],[1,"ion-padding"],["id","container",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],["id","container"],[1,"capitalize"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["alt","Task Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["alt","Task Image",2,"max-width","100px","max-height","100px",3,"src"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),D(3,"ion-menu-button"),a(),s(4,"ion-title"),c(5,"Home"),a()()(),s(6,"ion-content",1),A(7,kt,3,0,"div",2)(8,Ct,2,1,"ion-list",3),s(9,"ion-fab",4)(10,"ion-fab-button",5),u("click",function(){return t.openAddTaskModal()}),D(11,"ion-icon",6),a()()()),i&2&&(m(7),f("ngIf",t.taskList.length===0),m(),f("ngIf",t.taskList.length>0))},dependencies:[T,C,k,it,W,I,Y,Z,ot,j,tt,et,G,U,K,H],encapsulation:2});let o=n;return o})();export{Nt as HomePage};
