import{$ as et,B as U,C as K,D as G,L as J,M as Q,N as X,O as L,T as j,U as k,V as T,W as Y,X as Z,Y as I,Z as W,_ as tt,a as g,b as x,ca as it,d as V,e as $,f as z,g as m,ga as P,h as p,ha as C,i as _,ia as M,j as A,k as h,ka as nt,la as ot,ma as st,na as at,o as s,p as a,q as D,r as q,ra as lt,s as u,t as y,u as c,v,w as F,x as b,y as S,z as w}from"./chunk-AUK7B7C5.js";import"./chunk-SU4TQPZ4.js";import{a as rt}from"./chunk-ILFZJPTE.js";import"./chunk-X6QOBGWF.js";import"./chunk-GT5T3SDY.js";import"./chunk-Y5K6WPBY.js";import"./chunk-TBGYE3Z5.js";import"./chunk-PXJBPK6W.js";import"./chunk-4WFVMWDK.js";import"./chunk-53EJ7HX7.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{a as O,h as f}from"./chunk-B7O3QC5Z.js";var B=(()=>{let e=class e{constructor(n){this.alertController=n}presentAlert(n,i="Alert",t){return f(this,null,function*(){yield(yield this.alertController.create({header:i,subHeader:t,message:n,buttons:["OK"]})).present()})}};e.\u0275fac=function(i){return new(i||e)(x(nt))},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var ct=(()=>{let e=class e{constructor(n,i){this.modalCtrl=n,this.alert=i,this.task={name:"",hours:"",minutes:"",seconds:"",image:"",status:!1}}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return f(this,null,function*(){this.task.name?!this.task.hours&&!this.task.minutes&&!this.task.seconds?this.alert.presentAlert("Duration is required.","Error"):(this.modalCtrl.dismiss(this.task,"confirm"),this.task={name:"",hours:"",minutes:"",seconds:"",image:"",status:!1}):this.alert.presentAlert("Name is required.","Error")})}onFileChange(n){let i=n.target.files[0];if(i){let t=new FileReader;t.onload=()=>{this.task.image=t.result},t.readAsDataURL(i)}}};e.\u0275fac=function(i){return new(i||e)(p(M),p(B))},e.\u0275cmp=_({type:e,selectors:[["app-add-task-modal"]],decls:17,vars:4,consts:[["slot","start"],[3,"click"],["slot","end"],[1,"ion-padding"],["type","text","placeholder","Task Name","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Hours","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Minutes","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Seconds","ngDefaultControl","",3,"ngModelChange","ngModel"],["type","file","placeholder","Optional Image","ngDefaultControl","",3,"change"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return t.cancel()}),c(4,"Cancel"),a()(),s(5,"ion-buttons",2)(6,"ion-button",1),u("click",function(){return t.confirm()}),c(7,"Confirm"),a()()()(),s(8,"ion-content",3)(9,"ion-item")(10,"ion-input",4),w("ngModelChange",function(r){return S(t.task.name,r)||(t.task.name=r),r}),a()(),s(11,"ion-item")(12,"ion-input",5),w("ngModelChange",function(r){return S(t.task.hours,r)||(t.task.hours=r),r}),a(),s(13,"ion-input",6),w("ngModelChange",function(r){return S(t.task.minutes,r)||(t.task.minutes=r),r}),a(),s(14,"ion-input",7),w("ngModelChange",function(r){return S(t.task.seconds,r)||(t.task.seconds=r),r}),a()(),s(15,"ion-item")(16,"ion-input",8),u("change",function(r){return t.onFileChange(r)}),a()()()),i&2&&(m(10),b("ngModel",t.task.name),m(2),b("ngModel",t.task.hours),m(),b("ngModel",t.task.minutes),m(),b("ngModel",t.task.seconds))},dependencies:[L,J,Q,X,I,C,k,T,j,W,st],encapsulation:2});let o=e;return o})();var H=(()=>{let e=class e{constructor(){}formatDuration(n,i,t){let l=n!==""?+n:0,r=i!==""?+i:0,R=t!==""?+t:0,ft=l<10?`0${l}`:`${l}`,ht=r<10?`0${r}`:`${r}`,gt=R<10?`0${R}`:`${R}`;return`${ft}:${ht}:${gt}`}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var pt=(()=>{let e=class e{constructor(n,i){this.modalCtrl=n,this.common=i,this.timerHours=0,this.timerMinutes=0,this.timerSeconds=0,this.isTimerRunning=!1,this.timerInterval=null,setTimeout(()=>{this.resetTimer()},200)}close(){return this.modalCtrl.dismiss(null,"cancel")}startStopTimer(){this.isTimerRunning?clearInterval(this.timerInterval):this.timerInterval=setInterval(()=>this.updateTimer(),1e3),this.isTimerRunning=!this.isTimerRunning}updateTimer(){this.timerSeconds>0?this.timerSeconds--:this.timerMinutes>0?(this.timerMinutes--,this.timerSeconds=59):this.timerHours>0?(this.timerHours--,this.timerMinutes=59,this.timerSeconds=59):(clearInterval(this.timerInterval),this.isTimerRunning=!1,this.modalCtrl.dismiss(this.selectedTask,"confirm"))}resetTimer(){this.timerHours=this.selectedTask.hours||0,this.timerMinutes=this.selectedTask.minutes||0,this.timerSeconds=this.selectedTask.seconds||0}};e.\u0275fac=function(i){return new(i||e)(p(M),p(H))},e.\u0275cmp=_({type:e,selectors:[["app-timer-modal"]],inputs:{selectedTask:"selectedTask"},decls:15,vars:4,consts:[["slot","start"],[3,"click"],[1,"ion-padding"],[1,"timer-display"],["expand","full",3,"click"],["expand","full",3,"click","disabled"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return t.close()}),c(4,"Close"),a()(),s(5,"ion-title"),c(6),a()()(),s(7,"ion-content",2)(8,"div",3)(9,"h1"),c(10),a()(),s(11,"ion-button",4),u("click",function(){return t.startStopTimer()}),c(12),a(),s(13,"ion-button",5),u("click",function(){return t.resetTimer()}),c(14," Reset "),a()()),i&2&&(m(6),v(t.selectedTask.name),m(4),v(t.common.formatDuration(t.timerHours,t.timerMinutes,t.timerSeconds)),m(2),F(" ",t.isTimerRunning?"Pause":"Start"," "),m(),h("disabled",!t.isTimerRunning&&t.timerHours===0&&t.timerMinutes===0&&t.timerSeconds===0))},dependencies:[I,C,k,j,P,T],encapsulation:2});let o=e;return o})();var ut=(()=>{let e=class e{constructor(n){this.storage=n,this._storage=null,this.init()}init(){return f(this,null,function*(){let n=yield this.storage.create();this._storage=n})}set(n,i){return this._storage?.set(n,i)}get(n){return this._storage?.get(n)}remove(n){return this._storage?.remove(n)}clear(){return this._storage?.clear()}keys(){return this._storage?.keys()}length(){return this._storage?.length()}getAll(){let n=[];return this._storage?.forEach((i,t,l)=>{n[i]={value:t,index:l}}),n}};e.\u0275fac=function(i){return new(i||e)(x(lt))},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function kt(o,e){o&1&&(s(0,"div",7)(1,"strong",8),c(2,"First add a task"),a()())}function Tt(o,e){if(o&1&&D(0,"img",12),o&2){let d=y().$implicit;h("src",d.image,z)}}function It(o,e){if(o&1){let d=q();s(0,"ion-item",10),u("click",function(){let i=V(d).$implicit,t=y(2);return $(t.openTimerModal(i))}),s(1,"ion-label")(2,"h2"),c(3),a(),s(4,"p"),c(5),a()(),A(6,Tt,1,1,"img",11),a()}if(o&2){let d=e.$implicit,n=y(2);m(3),v(d.name),m(2),F("Duration: ",n.common.formatDuration(d.hours,d.minutes,d.seconds),""),m(),h("ngIf",d.image)}}function Ct(o,e){if(o&1&&(s(0,"ion-list"),A(1,It,7,3,"ion-item",9),a()),o&2){let d=y();m(),h("ngForOf",d.taskList)}}var Nt=(()=>{let e=class e{constructor(n,i,t,l){this.storage=n,this.alert=i,this.modalCtrl=t,this.common=l,this.taskList=[],rt({addOutline:at}),this.getTasks()}getTasks(){return f(this,null,function*(){yield this.storage.init(),this.taskList=(yield this.storage.get("tasks"))||[]})}openAddTaskModal(){return f(this,null,function*(){let n=yield this.modalCtrl.create({component:ct});n.present();let{data:i,role:t}=yield n.onWillDismiss();t==="confirm"&&(this.taskList.push(O({},i)),this.storage.set("tasks",this.taskList))})}openTimerModal(n){return f(this,null,function*(){let i=yield this.modalCtrl.create({component:pt,componentProps:{selectedTask:n}});i.present();let{data:t,role:l}=yield i.onWillDismiss();l==="confirm"&&(this.alert.presentAlert("Task "+t.name+" has been completed. Congratulations!!.","Success"),this.taskList=this.taskList.filter(r=>r!==t),this.storage.set("tasks",this.taskList))})}};e.\u0275fac=function(i){return new(i||e)(p(ut),p(B),p(M),p(H))},e.\u0275cmp=_({type:e,selectors:[["app-tasks"]],decls:12,vars:2,consts:[["slot","start"],[1,"ion-padding"],["id","container",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],["id","container"],[1,"capitalize"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["alt","Task Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["alt","Task Image",2,"max-width","100px","max-height","100px",3,"src"]],template:function(i,t){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),D(3,"ion-menu-button"),a(),s(4,"ion-title"),c(5,"Tasks"),a()()(),s(6,"ion-content",1),A(7,kt,3,0,"div",2)(8,Ct,2,1,"ion-list",3),s(9,"ion-fab",4)(10,"ion-fab-button",5),u("click",function(){return t.openAddTaskModal()}),D(11,"ion-icon",6),a()()()),i&2&&(m(7),h("ngIf",t.taskList.length===0),m(),h("ngIf",t.taskList.length>0))},dependencies:[I,C,k,it,P,T,Y,Z,ot,W,tt,et,G,U,K,L],encapsulation:2});let o=e;return o})();export{Nt as TasksPage};
