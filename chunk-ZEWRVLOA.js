import{$ as K,A as T,B as w,C as M,E as F,F as R,G as A,O as j,P as B,Q as N,R as O,U as Q,X as q,Y as Z,Z as z,_ as U,a as C,aa as G,b as y,ba as J,ca as X,d as m,da as Y,e as c,f as L,g as d,ga as $,h as V,i as W,j as k,k as p,ka as ee,la as te,na as ie,o as r,oa as ne,p as a,pa as se,q as I,qa as oe,r as x,s as h,t as l,ta as re,u as H,v,w as P,x as _,y as S,z as E}from"./chunk-NJZLKQXY.js";import"./chunk-COPWYOC5.js";import"./chunk-QGS6SLKV.js";import"./chunk-2RSFF4GF.js";import"./chunk-JL6LDP7Q.js";import"./chunk-F7XBNY6P.js";import"./chunk-ZSXYZYSQ.js";import"./chunk-5MPL5A3U.js";import"./chunk-NKT2XMZU.js";import"./chunk-4U6PRYVA.js";import"./chunk-46RS7FHX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as D,i as g}from"./chunk-OYAVQN5W.js";var le=(()=>{let s=class s{constructor(e){this.storage=e,this._storage=null,this.init()}init(){return g(this,null,function*(){let e=yield this.storage.create();this._storage=e})}set(e,t){var n;return(n=this._storage)==null?void 0:n.set(e,t)}get(e){var t;return(t=this._storage)==null?void 0:t.get(e)}remove(e){var t;return(t=this._storage)==null?void 0:t.remove(e)}clear(){var e;return(e=this._storage)==null?void 0:e.clear()}keys(){var e;return(e=this._storage)==null?void 0:e.keys()}length(){var e;return(e=this._storage)==null?void 0:e.length()}getAll(){var t;let e=[];return(t=this._storage)==null||t.forEach((n,u,f)=>{e[n]={value:u,index:f}}),e}};s.\u0275fac=function(t){return new(t||s)(y(re))},s.\u0275prov=C({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();var me=(()=>{let s=class s{constructor(e){this.alertController=e}presentAlert(e,t="Alert",n){return g(this,null,function*(){yield(yield this.alertController.create({header:t,subHeader:n,message:e,buttons:["OK"]})).present()})}};s.\u0275fac=function(t){return new(t||s)(y(ie))},s.\u0275prov=C({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();var ge=["addTaskModal"],pe=["timerModal"];function fe(o,s){o&1&&(r(0,"div",10)(1,"strong",11),_(2,"First add a task"),a()())}function ke(o,s){if(o&1&&I(0,"img",15),o&2){let i=l().$implicit;p("src",i.image,L)}}function xe(o,s){if(o&1){let i=x();r(0,"ion-item",13),h("click",function(){let t=m(i).$implicit,n=l(2);return c(n.openTimerModal(t))}),r(1,"ion-label")(2,"h2"),_(3),a(),r(4,"p"),_(5),a()(),k(6,ke,1,1,"img",14),a()}if(o&2){let i=s.$implicit,e=l(2);d(3),S(i.name),d(2),E("Duration: ",e.formatDuration(i.hours,i.minutes,i.seconds),""),d(),p("ngIf",i.image)}}function Te(o,s){if(o&1&&(r(0,"ion-list"),k(1,xe,7,3,"ion-item",12),a()),o&2){let i=l();d(),p("ngForOf",i.taskList)}}function we(o,s){if(o&1){let i=x();r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",7),h("click",function(){m(i);let t=l();return c(t.cancel())}),_(4,"Cancel"),a()(),r(5,"ion-buttons",16)(6,"ion-button",7),h("click",function(){m(i);let t=l();return c(t.confirm())}),_(7,"Confirm"),a()()()(),r(8,"ion-content",3)(9,"ion-item")(10,"ion-input",17),M("ngModelChange",function(t){m(i);let n=l();return w(n.task.name,t)||(n.task.name=t),c(t)}),a()(),r(11,"ion-item")(12,"ion-input",18),M("ngModelChange",function(t){m(i);let n=l();return w(n.task.hours,t)||(n.task.hours=t),c(t)}),a(),r(13,"ion-input",19),M("ngModelChange",function(t){m(i);let n=l();return w(n.task.minutes,t)||(n.task.minutes=t),c(t)}),a(),r(14,"ion-input",20),M("ngModelChange",function(t){m(i);let n=l();return w(n.task.seconds,t)||(n.task.seconds=t),c(t)}),a()(),r(15,"ion-item")(16,"ion-input",21),h("change",function(t){m(i);let n=l();return c(n.onFileChange(t))}),a()()()}if(o&2){let i=l();d(10),T("ngModel",i.task.name),d(2),T("ngModel",i.task.hours),d(),T("ngModel",i.task.minutes),d(),T("ngModel",i.task.seconds)}}function Me(o,s){if(o&1){let i=x();r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",7),h("click",function(){m(i);let t=l();return c(t.closeTimerModal(!0))}),_(4,"Cancel"),a()(),r(5,"ion-title"),_(6),a()()(),r(7,"ion-content",3)(8,"div",22)(9,"h1"),_(10),a()(),r(11,"ion-button",23),h("click",function(){m(i);let t=l();return c(t.startStopTimer())}),_(12),a(),r(13,"ion-button",24),h("click",function(){m(i);let t=l();return c(t.resetTimer())}),_(14," Reset "),a()()}if(o&2){let i=l();d(6),S(i.selectedTask.name),d(4),S(i.formatDuration(i.timerHours,i.timerMinutes,i.timerSeconds)),d(2),E(" ",i.isTimerRunning?"Pause":"Start"," "),d(),p("disabled",!i.isTimerRunning&&i.timerHours===0&&i.timerMinutes===0&&i.timerSeconds===0)}}var Le=(()=>{let s=class s{constructor(e,t){this.storage=e,this.alert=t,this.taskList=[],this.task={name:"",hours:"",minutes:"",seconds:"",image:""},this.selectedTask=null,this.timerHours=0,this.timerMinutes=0,this.timerSeconds=0,this.isTimerRunning=!1,this.timerInterval=null,se({addOutline:oe}),this.getTasks()}cancel(){this.addTaskModal.dismiss(null,"cancel")}confirm(){return g(this,null,function*(){this.task.name?!this.task.hours&&!this.task.minutes&&!this.task.seconds?this.alert.presentAlert("Duration is required.","Error"):(this.addTaskModal.dismiss(this.task,"confirm"),this.taskList.push(D({},this.task)),yield this.storage.set("tasks",this.taskList),this.task={name:"",hours:"",minutes:"",seconds:"",image:""}):this.alert.presentAlert("Name is required.","Error")})}onWillDismiss(e){e.detail.role==="confirm"&&(this.task=e.detail.data)}onFileChange(e){let t=e.target.files[0];if(t){let n=new FileReader;n.onload=()=>{this.task.image=n.result},n.readAsDataURL(t)}}openAddTaskModal(){this.addTaskModal.present()}getTasks(){return g(this,null,function*(){yield this.storage.init(),this.taskList=(yield this.storage.get("tasks"))||[]})}openTimerModal(e){this.selectedTask=e,this.timerHours=e.hours||0,this.timerMinutes=e.minutes||0,this.timerSeconds=e.seconds||0,this.timerModal.present()}closeTimerModal(e){e?this.timerModal.dismiss():this.isTimerRunning&&this.startStopTimer(),this.selectedTask&&(this.selectedTask.hours=this.timerHours,this.selectedTask.minutes=this.timerMinutes,this.selectedTask.seconds=this.timerSeconds,this.storage.set("tasks",this.taskList))}startStopTimer(){this.isTimerRunning?clearInterval(this.timerInterval):this.timerInterval=setInterval(()=>this.updateTimer(),1e3),this.isTimerRunning=!this.isTimerRunning}updateTimer(){this.timerSeconds>0?this.timerSeconds--:this.timerMinutes>0?(this.timerMinutes--,this.timerSeconds=59):this.timerHours>0?(this.timerHours--,this.timerMinutes=59,this.timerSeconds=59):(clearInterval(this.timerInterval),this.isTimerRunning=!1,this.timerModal.dismiss(),this.alert.presentAlert("Task "+this.selectedTask.name+" has been completed. Congratulations!!.","Success"),this.deleteTask(this.selectedTask))}resetTimer(){this.timerHours=this.selectedTask.hours||0,this.timerMinutes=this.selectedTask.minutes||0,this.timerSeconds=this.selectedTask.seconds||0}deleteTask(e){this.taskList=this.taskList.filter(t=>t!==e),this.storage.set("tasks",this.taskList)}formatDuration(e,t,n){let u=e!==""?+e:0,f=t!==""?+t:0,b=n!==""?+n:0,ce=this.padWithZero(u),de=this.padWithZero(f),ue=this.padWithZero(b);return`${ce}:${de}:${ue}`}padWithZero(e){return e<10?`0${e}`:`${e}`}};s.\u0275fac=function(t){return new(t||s)(V(le),V(me))},s.\u0275cmp=W({type:s,selectors:[["app-home"]],viewQuery:function(t,n){if(t&1&&(H(ge,5),H(pe,5)),t&2){let u;v(u=P())&&(n.addTaskModal=u.first),v(u=P())&&(n.timerModal=u.first)}},decls:18,vars:2,consts:[["addTaskModal",""],["timerModal",""],["slot","start"],[1,"ion-padding"],["id","container",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],[3,"willDismiss"],["id","container"],[1,"capitalize"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["alt","Task Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["alt","Task Image",2,"max-width","100px","max-height","100px",3,"src"],["slot","end"],["type","text","placeholder","Task Name","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Hours","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Minutes","ngDefaultControl","",3,"ngModelChange","ngModel"],["min","0","type","number","placeholder","Seconds","ngDefaultControl","",3,"ngModelChange","ngModel"],["type","file","placeholder","Optional Image","ngDefaultControl","",3,"change"],[1,"timer-display"],["expand","full",3,"click"],["expand","full",3,"click","disabled"]],template:function(t,n){if(t&1){let u=x();r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),I(3,"ion-menu-button"),a(),r(4,"ion-title"),_(5,"Home"),a()()(),r(6,"ion-content",3),k(7,fe,3,0,"div",4)(8,Te,2,1,"ion-list",5),r(9,"ion-fab",6)(10,"ion-fab-button",7),h("click",function(){return m(u),c(n.openAddTaskModal())}),I(11,"ion-icon",8),a()(),r(12,"ion-modal",9,0),h("willDismiss",function(b){return m(u),c(n.onWillDismiss(b))}),k(14,we,17,4,"ng-template"),a(),r(15,"ion-modal",9,1),h("willDismiss",function(){return m(u),c(n.closeTimerModal(!1))}),k(17,Me,15,4,"ng-template"),a()()}t&2&&(d(7),p("ngIf",n.taskList.length===0),d(),p("ngIf",n.taskList.length>0))},dependencies:[G,te,Z,$,ee,z,U,K,ne,Q,q,J,X,Y,A,F,R,O,j,B,N],encapsulation:2});let o=s;return o})();export{Le as HomePage};
